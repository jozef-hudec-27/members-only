<div class="post-wrapper">
    <div style="display: flex; align-items: center; width: calc(50% + 32px);">
        <h2 class="post-title"><%= @post.title %></h2>

        <% if current_user == @post.user %>
            <div class="post-actions">
                <%= link_to 'Edit post', edit_post_path(@post) %>
                <%= link_to 'Delete post', post_path(@post), data: { turbo_method: :delete, turbo_confirm: 'Are you sure you want to delete this post?' } %>
            </div>
        <% end %>
    </div>

    <div class="post-body">
        <p><%= @post.body %></p>
    </div>
</div>

<h3>Comments</h3>

<% if user_signed_in? %>
    <div class="comment-form">
        <%= render 'comments/form', comment: @comment, post: @post %>
    </div>
<% else %>
    <div class="comment-form-disabled">
        <p>You need to <a href="<%= new_user_session_path %>">sign in</a> to comment</p>
        <textarea cols="30" rows="10" disabled></textarea><br /><br />
        <button disabled>Create comment</button>
    </div>
<% end %>

<% if @post.comments.any? %>
    <div class="comments">
        <% @post.comments.each do |comment| %>
            <div class="comment">
                <p><%= comment.user.email %>:</p>
                <p><%= comment.body %></p>

                <% if comment.user == current_user %>
                    <%= link_to 'Delete', comment_path(comment), data: { turbo_method: :delete, turbo_confirm: 'Are you sure you want to delete this comment?' }  %>
                <% end %>
            </div>
        <% end %>
    </div>
<% elsif user_signed_in? %>
    <p>Be the first one to comment!</p>
<% end %>