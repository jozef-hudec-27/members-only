<h2><%= @post.title %></h2>

<p><%= @post.body %></p>

<% if current_user == @post.user %>
    <%= link_to 'Edit post', edit_post_path(@post) %>
    <%= link_to 'Delete post', post_path(@post), data: { turbo_method: :delete, turbo_confirm: 'Are you sure you want to delete this post?' } %>
<% end %>

<h3>Comments</h3>

<% if user_signed_in? %>
    <div class="comment-form">
        <%= render 'comments/form', comment: @comment, post: @post %>
    </div>
<% end %>

<% if @post.comments.any? %>
    <div class="comments">
        <% @post.comments.each do |comment| %>
            <div class="comment">
                <p><%= comment.user.email %>:</p>
                <p><%= comment.body %></p>

                <% if comment.user == current_user %>
                    <%= link_to 'Delete', comment_path(comment), data: { turbo_method: :delete, turbo_confirm: 'Are you sure you want to delete this comment?' }  %>
                <% end %>
            </div>
        <% end %>
    </div>
<% elsif user_signed_in? %>
    <p>Be the first one to comment!</p>
<% end %>